-- 1755753938_remove_conflicting_organization_bucket_constraint.up.sql

-- Code generated by database migration. DO NOT EDIT.

-- Remove the conflicting (organization_id, bucket_id) unique constraint that prevents multiple collectors per org+bucket
-- This constraint conflicts with the newer organization_buckets_org_bucket_instance_collector_unique constraint
-- Since multiple collectors can now exist for the same org+bucket, the foreign key constraint no longer makes sense

-- Drop the foreign key constraint that depends on the unique constraint
ALTER TABLE bucket_prefix_mappings DROP CONSTRAINT fk_prefix_org_bucket;

-- Drop the conflicting unique constraint
ALTER TABLE organization_buckets DROP CONSTRAINT lrconfig_organization_buckets_organization_id_bucket_id_key;