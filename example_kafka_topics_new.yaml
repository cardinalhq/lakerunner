# Kafka topics configuration override file
# This is version 2 format with strict field validation
# Note: topicPrefix is set via main config or LAKERUNNER_KAFKA_TOPIC_PREFIX environment variable

version: 2

# Global defaults for topic creation (WARNING: partition counts are for creation only)
defaults:
  partitionCount: 16
  replicationFactor: 2
  options:
    "cleanup.policy": "delete"
    "max.message.bytes": "10485760"
    "retention.ms": "604800000"

# Worker overrides by service type
workers:
  # Objstore ingest topics
  ingest-logs:
    partitionCount: 16
  ingest-metrics:
    partitionCount: 16
  ingest-traces:
    partitionCount: 16

  # Segments compact topics
  compact-logs:
    partitionCount: 4
  compact-metrics:
    partitionCount: 4
  compact-traces:
    partitionCount: 4

  # Segments rollup topics
  rollup-metrics:
    partitionCount: 4

  # Boxer topics
  boxer-compact-logs:
    partitionCount: 16
  boxer-compact-metrics:
    partitionCount: 16
  boxer-compact-traces:
    partitionCount: 16
  boxer-rollup-metrics:
    partitionCount: 16

# Example of additional options for specific workers:
#   compact-metrics:
#     partitionCount: 8
#     options:
#       "cleanup.policy": "compact,delete"
#       "segment.ms": "3600000"
#       "min.insync.replicas": "2"